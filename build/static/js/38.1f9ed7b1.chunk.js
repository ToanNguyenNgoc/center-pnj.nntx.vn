"use strict";(self.webpackChunkadmin_pnj_nntx_vn=self.webpackChunkadmin_pnj_nntx_vn||[]).push([[38],{4038:function(e,s,n){n.r(s);var t=n(885),r=n(1413),i=n(7257),a=n(2791),c=n(92),l=n(2930),d=n(3251),o=n(1933),u=n(1090),m=n(8289),h=n(8199),x=n(6871),p=n(3504),j=n(184),f=(0,i.Pi)((function(){var e,s=(0,x.s0)(),n=(0,h.Kx)(),t=n.query,i=n.handleQueryString,a=(0,h.Nr)(t.search||""),l=(0,d.mZ)().userModel,p=(0,o.useQuery)({queryKey:[u.h.QueryKey.users,(0,r.Z)((0,r.Z)({},t),{},{search:a})],queryFn:function(){return l.getUsers((0,r.Z)((0,r.Z)({},t),{},{search:a,sort:"-createdAt"}))}}),f=p.data,b=p.isLoading,v=p.refetch,N=(0,o.useMutation)({mutationFn:function(e){return l.deleteUser(e)},onSuccess:function(){m.FN.success("X\xf3a th\xe0nh c\xf4ng"),v(),c.Ur.close()},onError:function(){m.FN.error()}}),y=function(e){c.Ur.open({callBack:function(){return N.mutate(e)}})};return(0,j.jsxs)(c.yt,{permissions:[".users.get"],showEmpty:!0,children:[(0,j.jsx)(c.LL,{title:"Ng\u01b0\u1eddi d\xf9ng",element:(0,j.jsx)(c.yt,{permissions:[".users.post"],children:(0,j.jsx)(c.dw,{title:"T\u1ea1o m\u1edbi",onClick:function(){return s("/apps/users-form")}})})}),(0,j.jsxs)("div",{className:"card",children:[(0,j.jsx)("div",{className:"card-header border-0 pt-5",children:(0,j.jsx)("div",{className:"w-25",children:(0,j.jsx)(c.II,{placeholder:"T\xecm ki\u1ebfm T\xean, email, \u0111i\u1ec7n tho\u1ea1i...",defaultValue:t.search,onChange:function(e){return i("search",e.target.value)}})})}),(0,j.jsx)("div",{className:"card-body py-3",children:(0,j.jsxs)("div",{className:"table-responsive",children:[(0,j.jsxs)("table",{className:"table align-middle gs-0 gy-4",children:[(0,j.jsx)("thead",{children:(0,j.jsxs)("tr",{className:"fw-bold text-muted bg-light",children:[(0,j.jsx)("th",{className:"ps-4 min-w-250px rounded-start",children:"Th\xf4ng tin"}),(0,j.jsx)("th",{className:"ps-4 min-w-250px rounded-start",children:"Email"}),(0,j.jsx)("th",{className:"min-w-125px",children:"Quy\u1ec1n"}),(0,j.jsx)("th",{className:"min-w-125px",children:"Ng\xe0y t\u1ea1o"}),(0,j.jsx)("th",{className:"min-w-125px",children:"C\u1eadp nh\u1eadt"}),(0,j.jsx)("th",{className:"min-w-100px",children:"Tr\u1ea1ng th\xe1i"}),(0,j.jsx)("th",{className:"min-w-100px text-end rounded-end"})]})}),(0,j.jsxs)("tbody",{children:[(0,j.jsx)(c.sW,{isLoading:b,isEmpty:0===(null===f||void 0===f?void 0:f.total)&&!b}),null===f||void 0===f||null===(e=f.data)||void 0===e?void 0:e.map((function(e){return(0,j.jsx)(g,{user:e,onDelete:y},e.id)}))]})]}),(0,j.jsx)(c.tl,{count:null===f||void 0===f?void 0:f.total_page,page:t.page,onChangePage:function(e){return i("page",e)}})]})})]})]})})),g=function(e){var s,n=e.user,r=e.onDelete,i=void 0===r?function(){return null}:r,u=(0,d.mZ)().userModel,h=(0,a.useState)(n.active),x=(0,t.Z)(h,2),f=x[0],g=x[1],b=(0,o.useMutation)({mutationFn:function(e){return u.patchUser(n.id,e)},onSuccess:function(){m.FN.success()},onError:function(){g(n.active),m.FN.error()}}).mutate;return(0,j.jsxs)("tr",{children:[(0,j.jsx)("td",{children:(0,j.jsxs)("div",{className:"d-flex align-items-center",children:[(0,j.jsx)("div",{className:"symbol symbol-50px me-5",children:(0,j.jsx)(c.qE,{imageUrl:null===(s=n.media)||void 0===s?void 0:s.original_url,size:50})}),(0,j.jsxs)("div",{className:"d-flex justify-content-start flex-column",children:[(0,j.jsx)("span",{className:"text-dark fw-bold text-hover-primary mb-1 fs-6",children:n.fullname}),(0,j.jsx)("span",{className:"text-muted fw-semobold text-muted d-block fs-7",children:n.telephone})]})]})}),(0,j.jsx)("td",{children:(0,j.jsx)("span",{className:"text-dark d-block mb-1 fs-6",children:n.email})}),(0,j.jsx)("td",{children:(0,j.jsx)("span",{className:"text-dark fw-bold d-block mb-1 fs-6",children:0===n.roles.length?"Kh\xe1ch":"\u0110\u1ed9i ng\u0169"})}),(0,j.jsx)("td",{children:(0,j.jsx)("span",{className:"text-dark fw-bold d-block mb-1 fs-6",children:(0,m.p6)(n.createdAt)})}),(0,j.jsx)("td",{children:(0,j.jsx)("span",{className:"text-dark fw-bold d-block mb-1 fs-6",children:(0,m.p6)(n.updatedAt)})}),(0,j.jsx)("td",{children:(0,j.jsx)(c.yt,{permissions:[".users.:id.patch"],children:(0,j.jsx)(c.rs,{checked:f,onChange:function(e){g(e),b({active:e})}})})}),(0,j.jsxs)("td",{className:"text-end",children:[(0,j.jsx)(c.yt,{permissions:[".users.:id.get",".users.:id.patch"],children:(0,j.jsx)(p.rU,{to:"/apps/users-form/".concat(n.id),className:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1",children:(0,j.jsx)(l.D8,{path:"/media/icons/duotune/art/art005.svg",className:"svg-icon-3"})})}),(0,j.jsx)(c.yt,{permissions:[".users.:id.delete"],children:(0,j.jsx)("button",{onClick:function(){return i(n.id)},className:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm",children:(0,j.jsx)(l.D8,{path:"/media/icons/duotune/general/gen027.svg",className:"svg-icon-3"})})})]})]},n.id)};s.default=f}}]);
//# sourceMappingURL=38.1f9ed7b1.chunk.js.map