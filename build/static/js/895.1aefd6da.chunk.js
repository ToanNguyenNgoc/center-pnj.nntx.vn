"use strict";(self.webpackChunkadmin_pnj_nntx_vn=self.webpackChunkadmin_pnj_nntx_vn||[]).push([[895,770],{770:function(e,l,s){s.r(l),s.d(l,{useGetDataRoles:function(){return u}});var a=s(7257),r=s(793),i=s(1933),n=s(1090),o=s(7302),d=s(9603),c=s(6871),t=s(3504),m=s(184);function u(){var e=(0,d.pe)().hasEnabled,l=(0,o.mZ)().roleModel,s=(0,i.useQuery)({queryKey:[n.h.QueryKey.roles],queryFn:function(){return l.getRoles()},enabled:e(".roles.get")}).data;return{data:s,roles:(null===s||void 0===s?void 0:s.data)||[]}}var h=(0,a.Pi)((function(){var e,l=(0,c.s0)(),s=u().data;return(0,m.jsxs)(r.yt,{permissions:[".roles.get"],showEmpty:!0,children:[(0,m.jsx)(r.LL,{title:"Nh\xf3m ng\u01b0\u1eddi d\xf9ng",element:(0,m.jsx)(r.dw,{title:"T\u1ea1o m\u1edbi",onClick:function(){return l("/apps/roles-form")}})}),(0,m.jsxs)("div",{className:"card",children:[(0,m.jsx)("div",{className:"card-header border-0 pt-5",children:(0,m.jsx)("h3",{className:"card-title align-items-start flex-column",children:(0,m.jsx)("span",{className:"card-label fw-bold fs-3 mb-1",children:"Nh\xf3m quy\u1ec1n"})})}),(0,m.jsx)("div",{className:"card-body py-3",children:(0,m.jsx)("div",{className:"table-responsive",children:(0,m.jsxs)("table",{className:"table align-middle gs-0 gy-4",children:[(0,m.jsx)("thead",{children:(0,m.jsxs)("tr",{className:"fw-bold text-muted bg-light",children:[(0,m.jsx)("th",{className:"min-w-100x",children:"#"}),(0,m.jsx)("th",{className:"ps-4 min-w-300px rounded-start",children:"T\xean quy\u1ec1n"}),(0,m.jsx)("th",{className:"min-w-200px text-end",children:"Thao t\xe1c"})]})}),(0,m.jsx)("tbody",{children:null===s||void 0===s||null===(e=s.data)||void 0===e?void 0:e.map((function(e,l){return(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{children:(0,m.jsx)("span",{className:"text-dark fw-bold mb-1 fs-6",children:l+1})}),(0,m.jsx)("td",{children:(0,m.jsx)("span",{className:"text-dark fw-bold d-block mb-1 fs-6",children:e.name})}),(0,m.jsxs)("td",{className:"text-end",children:[(0,m.jsx)(r.yt,{permissions:[".roles.:id.get",".roles.:id.patch"],children:(0,m.jsx)(t.rU,{to:"/apps/roles-form/".concat(e.id),className:"btn btn-bg-light btn-color-muted btn-active-color-primary btn-sm px-4 me-2",children:"C\u1ea5p quy\u1ec1n"})}),(0,m.jsx)(r.yt,{permissions:[".roles.:id.delete"],children:(0,m.jsx)("button",{className:"btn btn-bg-light btn-color-muted btn-active-color-primary btn-sm px-4",children:"X\xf3a"})})]})]},e.id)}))})]})})})]})]})}));l.default=h},2895:function(e,l,s){s.r(l);var a=s(1413),r=s(7257),i=s(793),n=s(6871),o=s(5173),d=s(1724),c=s(2894),t=s(770),m=s(7302),u=s(1933),h=s(842),f=s(763),p=s(1090),x=s(2426),v=s.n(x),b=s(9603),g=s(184),j=(0,r.Pi)((function(){var e,l=(0,n.UO)().id,s=(0,m.mZ)().userModel,r=(0,b.zX)().handlePostMedia,x=(0,u.useMutation)({mutationFn:function(e){return l?s.patchUser(Number(l),e):s.postUser(e)},onSuccess:function(){h.FN.success()},onError:function(e){var l;h.FN.error(Array.isArray(e.data.message)?null===(l=e.data.message)||void 0===l?void 0:l.join(","):e.data.message)}}),j=(0,o.TA)({initialValues:{fullname:"",email:"",telephone:"",birthday:"",gender:!0,password:void 0,role_ids:[],media_id:void 0,active:!0,roles:[],media:void 0},validationSchema:d.Ry().shape({fullname:d.Z_().required("Vui l\xf2ng nh\u1eadp t\xean"),email:d.Z_().required("Vui l\xf2ng nh\u1eadp Email").email("Email kh\xf4ng \u0111\xfang \u0111\u1ecbnh d\u1ea1ng"),telephone:d.Z_().required("Vui l\xf2ng nh\u1eadp \u0111i\u1ec7n tho\u1ea1i").nullable(!0),password:l?d.Z_().optional():d.Z_().required("Vui l\xf2ng nh\u1eadp m\u1eadt kh\u1ea9u")}),onSubmit:function(e){var l,s=(0,f.omit)(e,["roles"]);x.mutate((0,a.Z)((0,a.Z)({},s),{},{media_id:null===(l=e.media)||void 0===l?void 0:l.id,email:e.email!==(null===N||void 0===N?void 0:N.email)?e.email:void 0,telephone:e.telephone!==(null===N||void 0===N?void 0:N.telephone)?e.telephone:void 0,birthday:v()(e.birthday).isValid()?e.birthday:void 0,role_ids:e.roles.map((function(e){return e.value}))}))}}),N=(0,u.useQuery)({queryKey:[p.h.QueryKey.users,l],queryFn:function(){return s.getUser(Number(l))},enabled:!!l,onSuccess:function(e){j.setFieldValue("fullname",e.fullname||""),j.setFieldValue("email",e.email||""),j.setFieldValue("telephone",e.telephone||""),j.setFieldValue("birthday",v()(e.birthday).format("YYYY-MM-DD")),j.setFieldValue("gender",e.gender),j.setFieldValue("active",e.active),j.setFieldValue("roles",e.roles.map((function(e){return{value:e.id,label:e.name}}))),j.setFieldValue("media",e.media)},onError:function(){h.FN.error()}}).data,y=(0,t.useGetDataRoles)().roles;return(0,g.jsxs)(i.yt,{permissions:l?[".users.:id.get",".users.:id.patch"]:[".users.post"],showEmpty:!0,children:[(0,g.jsx)(i.LL,{title:l?"Thay \u0111\u1ed5i th\xf4ng tin":"T\u1ea1o m\u1edbi"}),(0,g.jsx)("div",{className:"card p-6",children:(0,g.jsxs)("div",{className:"card mb-5 mb-xl-10",children:[(0,g.jsx)("div",{className:"card-header border-0 cursor-pointer",role:"button","data-bs-toggle":"collapse","data-bs-target":"#kt_account_profile_details","aria-expanded":"true","aria-controls":"kt_account_profile_details",children:(0,g.jsx)("div",{className:"card-title m-0",children:(0,g.jsx)("h3",{className:"fw-bolder m-0",children:"Th\xf4ng tin"})})}),(0,g.jsx)("div",{id:"kt_account_profile_details",className:"collapse show",children:(0,g.jsxs)("form",{onSubmit:j.handleSubmit,noValidate:!0,className:"form",children:[(0,g.jsxs)("div",{className:"card-body border-top p-9",children:[(0,g.jsxs)("div",{className:"row mb-6",children:[(0,g.jsx)("label",{className:"col-lg-4 col-form-label fw-bold fs-6",children:"H\xecnh"}),(0,g.jsxs)("div",{className:"col-lg-8 d-flex align-items-center",children:[(0,g.jsx)(i.qE,{imageUrl:null===(e=j.values.media)||void 0===e?void 0:e.original_url,size:130}),(0,g.jsx)(i.Zy,{size:40,className:"ms-4",onChangeFile:function(e){r({files:e,callBackLocal:function(e){e[0].origin_url&&j.setFieldValue("media",(0,a.Z)((0,a.Z)({},j.values.media),{},{original_url:e[0].origin_url}))},callBackApi:function(e){e[0].origin_url&&j.setFieldValue("media",(0,a.Z)((0,a.Z)({},j.values.media),{},{original_url:e[0].origin_url,id:e[0].id}))}})}})]})]}),(0,g.jsxs)("div",{className:"row mb-6",children:[(0,g.jsx)("label",{className:"col-lg-4 col-form-label required fw-bold fs-6",children:"H\u1ecd v\xe0 t\xean"}),(0,g.jsx)("div",{className:"col-lg-8",children:(0,g.jsx)("div",{className:"row",children:(0,g.jsxs)("div",{className:"col-lg-12 fv-row",children:[(0,g.jsx)("input",(0,a.Z)({type:"text",className:"form-control form-control-lg form-control-solid mb-3 mb-lg-0",placeholder:"H\u1ecd v\xe0 t\xean"},j.getFieldProps("fullname"))),j.touched.fullname&&j.errors.fullname&&(0,g.jsx)("div",{className:"fv-plugins-message-container",children:(0,g.jsx)("div",{className:"fv-help-block",children:j.errors.fullname})})]})})})]}),(0,g.jsxs)("div",{className:"row mb-6",children:[(0,g.jsx)("label",{className:"col-lg-4 col-form-label required fw-bold fs-6",children:"Email"}),(0,g.jsxs)("div",{className:"col-lg-8 fv-row",children:[(0,g.jsx)("input",(0,a.Z)({type:"text",className:"form-control form-control-lg form-control-solid",placeholder:"Email"},j.getFieldProps("email"))),j.touched.email&&j.errors.email&&(0,g.jsx)("div",{className:"fv-plugins-message-container",children:(0,g.jsx)("div",{className:"fv-help-block",children:j.errors.email})})]})]}),(0,g.jsxs)("div",{className:"row mb-6",children:[(0,g.jsx)("label",{className:"col-lg-4 col-form-label fw-bold fs-6",children:(0,g.jsx)("span",{className:"required",children:"\u0110i\u1ec7n tho\u1ea1i"})}),(0,g.jsxs)("div",{className:"col-lg-8 fv-row",children:[(0,g.jsx)("input",(0,a.Z)({type:"tel",className:"form-control form-control-lg form-control-solid",placeholder:"\u0110i\u1ec7n tho\u1ea1i"},j.getFieldProps("telephone"))),j.touched.telephone&&j.errors.telephone&&(0,g.jsx)("div",{className:"fv-plugins-message-container",children:(0,g.jsx)("div",{className:"fv-help-block",children:j.errors.telephone})})]})]}),(0,g.jsxs)("div",{className:"row mb-6",children:[(0,g.jsx)("label",{className:"col-lg-4 col-form-label fw-bold fs-6",children:(0,g.jsx)("span",{className:"required",children:"M\u1eadt kh\u1ea9u"})}),(0,g.jsxs)("div",{className:"col-lg-8 fv-row",children:[(0,g.jsx)("input",(0,a.Z)({type:"password",className:"form-control form-control-lg form-control-solid",placeholder:"M\u1eadt kh\u1ea9u"},j.getFieldProps("password"))),j.touched.password&&j.errors.password&&(0,g.jsx)("div",{className:"fv-plugins-message-container",children:(0,g.jsx)("div",{className:"fv-help-block",children:j.errors.password})})]})]}),(0,g.jsxs)("div",{className:"row mb-6",children:[(0,g.jsx)("label",{className:"col-lg-4 col-form-label fw-bold fs-6",children:(0,g.jsx)("span",{children:"Ng\xe0y sinh"})}),(0,g.jsx)("div",{className:"col-lg-8 fv-row",children:(0,g.jsx)("input",(0,a.Z)({type:"date",className:"form-control form-control-lg form-control-solid",placeholder:"Ng\xe0y sinh"},j.getFieldProps("birthday")))})]}),l&&(0,g.jsxs)("div",{className:"row mb-6",children:[(0,g.jsx)("label",{className:"col-lg-4 col-form-label fw-bold fs-6",children:(0,g.jsx)("span",{children:"Tr\u1ea1ng th\xe1i"})}),(0,g.jsx)("div",{className:"col-lg-8 fv-row",children:(0,g.jsx)(i.rs,{checked:j.values.active,onChange:function(e){return j.setFieldValue("active",e)}})})]}),(0,g.jsxs)("div",{className:"row mb-6",children:[(0,g.jsx)("label",{className:"col-lg-4 col-form-label fw-bold fs-6",children:(0,g.jsx)("span",{children:"G\u1edbi t\xednh"})}),(0,g.jsx)("div",{className:"col-lg-8 fv-row",children:(0,g.jsx)(i.rs,{checked:j.values.gender,onChange:function(e){return j.setFieldValue("gender",e)}})})]}),(0,g.jsxs)("div",{className:"row mb-6",children:[(0,g.jsx)("label",{className:"col-lg-4 col-form-label fw-bold fs-6",children:(0,g.jsx)("span",{children:"Ph\xe2n quy\u1ec1n"})}),(0,g.jsx)("div",{className:"col-lg-8 fv-row",children:(0,g.jsx)(c.ZP,{value:j.values.roles,onChange:function(e){return j.setFieldValue("roles",e)},options:y.map((function(e){return{value:e.id,label:e.name}})),isMulti:!0,closeMenuOnSelect:!1})})]})]}),(0,g.jsx)("div",{className:"card-footer d-flex justify-content-end py-6 px-9",children:(0,g.jsx)(i.dw,{title:"L\u01b0u th\xf4ng tin",type:"submit",loading:x.isLoading})})]})})]})})]})}));l.default=j}}]);
//# sourceMappingURL=895.1aefd6da.chunk.js.map