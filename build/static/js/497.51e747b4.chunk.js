"use strict";(self.webpackChunkadmin_pnj_nntx_vn=self.webpackChunkadmin_pnj_nntx_vn||[]).push([[497],{3497:function(n,s,t){t.r(s);var e=t(885),i=t(7257),a=t(793),r=t(3504),c=t(7302),o=t(1933),d=t(1090),l=t(2791),m=t(842),u=t(2930),h=t(184),x=(0,i.Pi)((function(){var n,s=(0,c.mZ)().organizationModel,t=(0,o.useQuery)({queryKey:[d.h.QueryKey.organizations],queryFn:function(){return s.getOrgs()}}),e=t.data,i=t.isLoading,l=t.refetch,u=(0,o.useMutation)({mutationFn:function(n){return s.deleteOrg(n)},onSuccess:function(){m.FN.success("X\xf3a th\xe0nh c\xf4ng"),l(),a.Ur.close()},onError:function(){m.FN.error()}});return(0,h.jsxs)("div",{className:"card",children:[(0,h.jsx)(a.LL,{title:"Th\xf4ng tin c\xf4ng ty",element:(0,h.jsx)(a.yt,{permissions:[".organizations.post"],children:(0,h.jsx)(r.rU,{to:"/apps/organizations-form",className:"btn btn-primary",children:"T\u1ea1o m\u1edbi"})})}),(0,h.jsx)("div",{className:"card-body py-3",children:(0,h.jsx)("div",{className:"table-responsive",children:(0,h.jsxs)("table",{className:"table align-middle gs-0 gy-4",children:[(0,h.jsx)("thead",{children:(0,h.jsxs)("tr",{className:"fw-bold text-muted bg-light",children:[(0,h.jsx)("th",{className:"ps-4 min-w-250px rounded-start",children:"Th\xf4ng tin"}),(0,h.jsx)("th",{className:"ps-4 min-w-100px rounded-start",children:"H\xecnh \u1ea3nh"}),(0,h.jsx)("th",{className:"min-w-100px",children:"\u0110\u1ecba ch\u1ec9"}),(0,h.jsx)("th",{className:"min-w-175px",children:"Ng\xe0y t\u1ea1o"}),(0,h.jsx)("th",{className:"min-w-175px",children:"C\u1eadp nh\u1eadt"}),(0,h.jsx)("th",{className:"min-w-100px",children:"Tr\u1ea1ng th\xe1i"}),(0,h.jsx)("th",{className:"min-w-100px text-end rounded-end"})]})}),(0,h.jsxs)("tbody",{children:[(0,h.jsx)(a.sW,{isLoading:i,isEmpty:0===(null===e||void 0===e?void 0:e.total)&&!i}),null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.map((function(n){return(0,h.jsx)(p,{org:n,onDelete:function(){return a.Ur.open({callBack:function(){return u.mutate(n.id)}})}},n.id)}))]})]})})})]})})),p=function(n){var s,t,i,d,x=n.org,p=n.onDelete,j=void 0===p?function(){return null}:p,g=(0,c.mZ)().organizationModel,v=(0,l.useState)(x.active),b=(0,e.Z)(v,2),f=b[0],N=b[1],y=(0,o.useMutation)({mutationFn:function(n){return g.patchOrg(x.id,{active:n,contacts:x.contacts})},onSuccess:function(){m.FN.success()},onError:function(){m.FN.error(),N(x.active)}});return(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{children:(0,h.jsx)("span",{className:"text-dark fw-bold mb-1 fs-6 ps-4",children:x.name})}),(0,h.jsx)("td",{children:(0,h.jsx)(a.qE,{imageUrl:null===(s=x.media)||void 0===s?void 0:s.original_url,size:100})}),(0,h.jsx)("td",{children:(0,h.jsx)("span",{className:"text-dark mb-1 fs-6 ps-4",children:"".concat(x.short_address,", ").concat(null===(t=x.ward)||void 0===t?void 0:t.name,", ").concat(null===(i=x.district)||void 0===i?void 0:i.name,", ").concat(null===(d=x.province)||void 0===d?void 0:d.name)})}),(0,h.jsx)("td",{children:(0,h.jsx)("span",{className:"text-dark mb-1 fs-6 ps-4",children:(0,m.p6)(x.createdAt)})}),(0,h.jsx)("td",{children:(0,h.jsx)("span",{className:"text-dark mb-1 fs-6 ps-4",children:(0,m.p6)(x.updatedAt)})}),(0,h.jsx)("td",{children:(0,h.jsx)(a.yt,{permissions:[".organizations.:id.patch"],children:(0,h.jsx)(a.rs,{checked:f,onChange:function(n){N(n),y.mutate(n)}})})}),(0,h.jsxs)("td",{className:"text-end",children:[(0,h.jsx)(a.yt,{permissions:[".organizations.:id.patch"],children:(0,h.jsx)(r.rU,{to:"/apps/organizations-form/".concat(x.id),className:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1",children:(0,h.jsx)(u.D8,{path:"/media/icons/duotune/art/art005.svg",className:"svg-icon-3"})})}),(0,h.jsx)(a.yt,{permissions:[".organizations.:id.delete"],children:(0,h.jsx)("button",{onClick:j,className:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm",children:(0,h.jsx)(u.D8,{path:"/media/icons/duotune/general/gen027.svg",className:"svg-icon-3"})})})]})]})};s.default=x}}]);
//# sourceMappingURL=497.51e747b4.chunk.js.map