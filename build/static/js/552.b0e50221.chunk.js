"use strict";(self.webpackChunkadmin_pnj_nntx_vn=self.webpackChunkadmin_pnj_nntx_vn||[]).push([[552],{552:function(e,n,s){s.r(n);var i=s(2982),l=s(1413),a=s(7257),c=s(6871),t=s(92),r=s(5173),o=s(1724),d=s(9603),u=s(1933),m=s(7302),h=s(8289),v=s(763),f=s(1090),x=s(2930),g=s(2894),p=s(184),j=(0,a.Pi)((function(){var e,n=(0,c.UO)().id,s=(0,d.rS)().types,a=(0,m.mZ)().organizationModel,j=(0,d.zX)().handlePostMedia,b=(0,u.useMutation)({mutationFn:function(e){return n?a.patchOrg(Number(n),e):a.postOrg(e)},onSuccess:function(){h.FN.success()},onError:function(){h.FN.error()}}),N=(0,r.TA)({initialValues:{name:"",province_code:void 0,district_code:void 0,ward_code:void 0,short_address:"",media_id:void 0,media:void 0,contacts:[],active:!0},validationSchema:o.Ry().shape({name:o.Z_().required("Vui l\xf2ng nh\u1eadp t\xean"),short_address:o.Z_().required("Vui l\xf2ng nh\u1eadp \u0111\u1ecba ch\u1ec9")}),onSubmit:function(e){var n,s=(0,v.omit)(e,["media"]);s.contacts=s.contacts.filter((function(e){return e.contact_type&&e.value})),b.mutate((0,l.Z)((0,l.Z)({},s),{},{media_id:null===(n=e.media)||void 0===n?void 0:n.id}))}}),_=(0,u.useQuery)({queryKey:[f.h.QueryKey.organizations,n],queryFn:function(){return a.getOrg(Number(n))},enabled:!!n,onSuccess:function(e){var n,s,i;N.setValues((0,l.Z)((0,l.Z)({},e),{},{province_code:null===(n=e.province)||void 0===n?void 0:n.code,district_code:null===(s=e.district)||void 0===s?void 0:s.code,ward_code:null===(i=e.ward)||void 0===i?void 0:i.code}))}}),w=_.refetch,y=_.isFetching,F=N.values.contacts,V=function(e,n,s){var i=F.map((function(i,l){return e===l&&(i[n]=s),i}));N.setFieldValue("contacts",i)},Z=function(e){var n=s.find((function(n){return n.name===e}));if(n)return{value:n.name,label:n.desc}};return(0,p.jsxs)(t.yt,{permissions:n?[".organizations.:id.patch",".admin.orders.:id.patch"]:[".organizations.post"],children:[(0,p.jsx)(t.LL,{title:"Th\xf4ng tin c\xf4ng ty"}),(0,p.jsx)("div",{className:"card p-6",children:(0,p.jsxs)("form",{onSubmit:N.handleSubmit,noValidate:!0,className:"form",children:[(0,p.jsxs)("div",{className:"row mb-6",children:[(0,p.jsx)("label",{className:"col-lg-4 col-form-label fw-bold fs-6",children:"H\xecnh \u1ea3nh"}),(0,p.jsxs)("div",{className:"col-lg-8 d-flex align-items-center",children:[(0,p.jsx)(t.qE,{imageUrl:null===(e=N.values.media)||void 0===e?void 0:e.original_url,size:200}),(0,p.jsx)(t.Zy,{size:40,className:"ms-4",onChangeFile:function(e){j({files:e,callBackLocal:function(e){e[0].origin_url&&N.setFieldValue("media",(0,l.Z)((0,l.Z)({},N.values.media),{},{original_url:e[0].origin_url}))},callBackApi:function(e){e[0].origin_url&&N.setFieldValue("media",(0,l.Z)((0,l.Z)({},N.values.media),{},{original_url:e[0].origin_url,id:e[0].id}))}})}})]})]}),(0,p.jsxs)("div",{className:"row mb-6",children:[(0,p.jsx)("label",{className:"col-lg-4 col-form-label fw-bold fs-6",children:(0,p.jsx)("span",{className:"required",children:"T\xean c\xf4ng ty"})}),(0,p.jsxs)("div",{className:"col-lg-8 fv-row",children:[(0,p.jsx)("input",(0,l.Z)({className:"form-control form-control-lg form-control-solid",placeholder:"T\xean c\xf4ng ty"},N.getFieldProps("name"))),N.touched.name&&N.errors.name&&(0,p.jsx)("div",{className:"fv-plugins-message-container",children:(0,p.jsx)("div",{className:"fv-help-block",children:N.errors.name})})]})]}),(0,p.jsx)(t.u$,{required:!0,province_code:N.values.province_code,onSelectProvince:function(e){return N.setFieldValue("province_code",e)},district_code:N.values.district_code,onSelectDistrict:function(e){return N.setFieldValue("district_code",e)},ward_code:N.values.ward_code,onSelectWard:function(e){return N.setFieldValue("ward_code",e)}}),(0,p.jsxs)("div",{className:"row mb-6",children:[(0,p.jsx)("label",{className:"col-lg-4 col-form-label fw-bold fs-6",children:(0,p.jsx)("span",{className:"required",children:"\u0110\u1ecba ch\u1ec9"})}),(0,p.jsxs)("div",{className:"col-lg-8 fv-row",children:[(0,p.jsx)("input",(0,l.Z)({className:"form-control form-control-lg form-control-solid",placeholder:"\u0110\u1ecba ch\u1ec9"},N.getFieldProps("short_address"))),N.touched.short_address&&N.errors.short_address&&(0,p.jsx)("div",{className:"fv-plugins-message-container",children:(0,p.jsx)("div",{className:"fv-help-block",children:N.errors.short_address})})]})]}),(0,p.jsxs)("div",{className:"row mb-6",children:[(0,p.jsx)("label",{className:"col-lg-4 col-form-label fw-bold fs-6",children:(0,p.jsx)("span",{children:"Tr\u1ea1ng th\xe1i"})}),(0,p.jsx)("div",{className:"col-lg-8 fv-row",children:(0,p.jsx)(t.rs,{checked:N.values.active,onChange:function(e){return N.setFieldValue("active",e)}})})]}),(0,p.jsxs)("div",{className:"mb-6",children:[(0,p.jsx)("label",{className:"col-lg-4 col-form-label fw-bold fs-6",children:(0,p.jsx)("span",{children:"Th\xf4ng tin li\xean h\u1ec7"})}),(0,p.jsxs)("div",{className:"table-responsive",children:[(0,p.jsxs)("table",{className:"table align-middle gs-0 gy-4",children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{className:"fw-bold text-muted bg-light",children:[(0,p.jsx)("th",{className:"ps-4 min-w-125px",children:"Ph\xe2n lo\u1ea1i li\xean h\u1ec7"}),(0,p.jsx)("th",{className:"ps-4 min-w-250px rounded-start",children:"Gi\xe1 tr\u1ecb"}),(0,p.jsx)("th",{className:"ps-4 min-w-250px rounded-start",children:"Icon"}),(0,p.jsx)("th",{className:"min-w-50 text-end rounded-end"})]})}),(0,p.jsx)("tbody",{children:N.values.contacts.map((function(e,n){return(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:(0,p.jsx)(g.ZP,{value:Z(e.contact_type||""),onChange:function(e){return V(n,"contact_type",e.value)},options:s.map((function(e){return{value:e.name,label:e.desc}}))})}),(0,p.jsx)("td",{children:(0,p.jsx)(t.II,{placeholder:"Gi\xe1 tr\u1ecb",defaultValue:e.value,onChange:function(e){return V(n,"value",e.target.value)}})}),(0,p.jsx)("td",{children:(0,p.jsx)(t.II,{placeholder:"Link icon",defaultValue:e.icon,onChange:function(e){return V(n,"icon",e.target.value)}})}),(0,p.jsx)("td",{children:(0,p.jsx)("button",{type:"button",className:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm",onClick:function(){return function(e){N.setFieldValue("contacts",F.filter((function(n,s){return s!==e})))}(n)},children:(0,p.jsx)(x.D8,{path:"/media/icons/duotune/general/gen027.svg",className:"svg-icon-3"})})})]},n)}))}),(0,p.jsx)("tbody",{})]}),(0,p.jsx)("div",{className:"d-flex justify-content-end",children:(0,p.jsx)(t.dw,{className:"btn-success btn-sm mb-2",title:"Th\xeam m\u1edbi li\xean h\u1ec7",type:"button",onClick:function(){N.setFieldValue("contacts",[].concat((0,i.Z)(F),[{}]))}})})]})]}),(0,p.jsxs)("div",{className:"card-footer d-flex justify-content-end py-6 px-9",children:[n&&(0,p.jsx)(t.dw,{title:"Kh\xf4i ph\u1ee5c",className:"btn-secondary me-2",type:"button",onClick:function(){return w()},loading:y}),(0,p.jsx)(t.dw,{title:"L\u01b0u th\xf4ng tin",type:"submit",loading:b.isLoading})]})]})})]})}));n.default=j}}]);
//# sourceMappingURL=552.b0e50221.chunk.js.map