"use strict";(self.webpackChunkadmin_pnj_nntx_vn=self.webpackChunkadmin_pnj_nntx_vn||[]).push([[160],{7160:function(n,e,i){i.r(e);var s=i(2982),r=i(885),t=i(7257),c=i(6871),u=i(3997),o=i(2791),a=i(1933),l=i(1090),d=i(329),m=i(5413),f=i(590),p=i(184),h=(0,t.Pi)((function(){var n=(0,d.mZ)().roleModel,e=(0,o.useState)(""),i=(0,r.Z)(e,2),t=i[0],h=i[1],y=(0,o.useState)([]),v=(0,r.Z)(y,2),N=v[0],g=v[1],w=(0,c.UO)().id,b=(0,a.useQuery)({queryKey:[l.h.QueryKey.roles,w],queryFn:function(){return n.getRole(Number(w))},enabled:!!w,onSuccess:function(n){h(n.name),g(n.permissions)}}),k=b.isLoading,C=b.refetch,_=(0,m.K)().permissionsGroup,L=function(n){Array.isArray(n)?n.forEach((function(n){return q(n)})):q(n)},q=function(n){g((function(e){var i=(0,s.Z)(e);return i=e.findIndex((function(e){return e.id===n.id}))<0?[].concat((0,s.Z)(i),[n]):i.filter((function(e){return e.id!==n.id}))}))},T=function(n){return!(n.filter((function(n){return N.map((function(n){return n.name})).includes(n.name)})).length!==n.length)},Z=(0,a.useMutation)({mutationFn:function(e){return w?n.putRole(Number(w),e):n.postRole(e)},onSuccess:function(n,e,i){f.Am.success("L\u01b0u th\xe0nh c\xf4ng")},onError:function(n,e,i){f.Am.error("C\xf3 l\u1ed7i x\u1ea3y ra. Vui l\xf2ng th\u1eed l\u1ea1i")}}),A=Z.mutate,K=Z.isLoading;return(0,p.jsxs)(u.yt,{permissions:w?[".roles.:id.get",".roles.:id.patch"]:[".roles.post"],showEmpty:!0,children:[(0,p.jsx)(u.LL,{title:w?"C\u1ea5p quy\u1ec1n":"T\u1ea1o m\u1edbi"}),(0,p.jsxs)("div",{className:"card p-6",children:[(0,p.jsx)("div",{className:"flex-row-sp input-wrap w-100",children:(0,p.jsxs)("div",{className:"wrap-item mb-4 w-100",children:[(0,p.jsx)("label",{className:"form-label fw-bold",children:"T\xean quy\u1ec1n"}),(0,p.jsx)(u.II,{onChange:function(n){return h(n.target.value)},value:t,name:"priority",placeholder:"T\xean quy\u1ec1n"})]})}),(0,p.jsx)("div",{className:"post d-flex flex-column-fluid",id:"kt_post",children:(0,p.jsx)("div",{className:"w-100",children:_.map((function(n){return(0,p.jsxs)("div",{className:"mb-8",children:[(0,p.jsx)("span",{className:"fw-bold",children:n.desc}),(0,p.jsxs)("div",{className:"w-100 d-flex mt-2",children:[(0,p.jsx)("div",{style:{width:"14.2%",cursor:"pointer"},onClick:function(){T(n.permissions)?L(n.permissions):L(n.permissions.filter((function(n){return!N.map((function(n){return n.name})).includes(n.name)})))},children:(0,p.jsxs)("div",{children:[(0,p.jsx)("input",{type:"checkbox",className:"form-check-input cursor-pointer",readOnly:!0,checked:T(n.permissions)}),(0,p.jsx)("span",{className:"m-2",children:"T\u1ea5t c\u1ea3"})]})}),x(n.permissions).map((function(n,e){return(0,p.jsx)("div",{style:{width:"14.2%",cursor:"pointer"},onClick:function(){return L(n)},children:(0,p.jsxs)("div",{children:[(0,p.jsx)("input",{type:"checkbox",className:"form-check-input cursor-pointer",readOnly:!0,checked:!!N.find((function(e){return e.id===n.id}))}),(0,p.jsx)("span",{className:"m-2",children:(0,p.jsx)(j,{name:n.name})})]})},e)}))]})]},n.name)}))})}),(0,p.jsxs)("div",{className:"d-flex justify-content-end",children:[w&&(0,p.jsx)(u.dw,{title:"Kh\xf4i ph\u1ee5c",className:"btn-secondary me-2",onClick:function(){return C()},loading:k}),(0,p.jsx)(u.dw,{title:"L\u01b0u",className:"btn-success",onClick:function(){0!==t.trim().length&&A({name:t,permission_ids:N.map((function(n){return n.id}))})},loading:K})]})]})]})}));e.default=h;var x=function(n){return n.sort((function(n,e){return n.name.length-e.name.length}))},j=function(n){var e=n.name;return(0,p.jsx)("span",{children:function(){var n="";return e.includes("get")&&(n="Danh s\xe1ch"),e.includes(":id.get")&&(n="Chi ti\u1ebft"),(e.includes("post")||e.includes("sendNotification"))&&(n="T\u1ea1o m\u1edbi"),(e.includes(":id.patch")||e.includes("update"))&&(n="C\u1eadp nh\u1eadt"),e.includes(":id.delete")&&(n="X\xf3a"),n}()})}}}]);
//# sourceMappingURL=160.ea39fc9c.chunk.js.map