"use strict";(self.webpackChunkadmin_pnj_nntx_vn=self.webpackChunkadmin_pnj_nntx_vn||[]).push([[38],{4038:function(e,s,n){n.r(s);var t=n(5861),r=n(885),i=n(1413),a=n(4687),c=n.n(a),l=n(7257),d=n(2791),o=n(92),u=n(2930),m=n(7302),h=n(1933),x=n(1090),p=n(8289),j=n(9603),f=n(6871),g=n(3504),b=n(184),v=(0,l.Pi)((function(){var e,s=(0,f.s0)(),n=(0,j.Kx)(),t=n.query,r=n.handleQueryString,a=(0,j.Nr)(t.search||""),c=(0,m.mZ)().userModel,l=(0,h.useQuery)({queryKey:[x.h.QueryKey.users,(0,i.Z)((0,i.Z)({},t),{},{search:a})],queryFn:function(){return c.getUsers((0,i.Z)((0,i.Z)({},t),{},{search:a,sort:"-createdAt"}))}}),d=l.data,u=l.isLoading,g=l.refetch,v=(0,h.useMutation)({mutationFn:function(e){return c.deleteUser(e)},onSuccess:function(){p.FN.success("X\xf3a th\xe0nh c\xf4ng"),g(),o.Ur.close()},onError:function(){p.FN.error()}}),y=function(e){o.Ur.open({callBack:function(){return v.mutate(e)}})};return(0,b.jsxs)(o.yt,{permissions:[".users.get"],showEmpty:!0,children:[(0,b.jsx)(o.LL,{title:"Ng\u01b0\u1eddi d\xf9ng",element:(0,b.jsx)(o.yt,{permissions:[".users.post"],children:(0,b.jsx)(o.dw,{title:"T\u1ea1o m\u1edbi",onClick:function(){return s("/apps/users-form")}})})}),(0,b.jsxs)("div",{className:"card",children:[(0,b.jsx)("div",{className:"card-header border-0 pt-5",children:(0,b.jsx)("div",{className:"w-25",children:(0,b.jsx)(o.II,{placeholder:"T\xecm ki\u1ebfm T\xean, email, \u0111i\u1ec7n tho\u1ea1i...",defaultValue:t.search,onChange:function(e){return r("search",e.target.value)}})})}),(0,b.jsx)("div",{className:"card-body py-3",children:(0,b.jsxs)("div",{className:"table-responsive",children:[(0,b.jsxs)("table",{className:"table align-middle gs-0 gy-4",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"fw-bold text-muted bg-light",children:[(0,b.jsx)("th",{className:"ps-4 min-w-250px rounded-start",children:"Th\xf4ng tin"}),(0,b.jsx)("th",{className:"ps-4 min-w-250px rounded-start",children:"Email"}),(0,b.jsx)("th",{className:"min-w-125px",children:"Quy\u1ec1n"}),(0,b.jsx)("th",{className:"min-w-125px",children:"Ng\xe0y t\u1ea1o"}),(0,b.jsx)("th",{className:"min-w-125px",children:"C\u1eadp nh\u1eadt"}),(0,b.jsx)("th",{className:"min-w-100px",children:"Tr\u1ea1ng th\xe1i"}),(0,b.jsx)("th",{className:"min-w-100px text-end rounded-end"})]})}),(0,b.jsxs)("tbody",{children:[(0,b.jsx)(o.sW,{isLoading:u,isEmpty:0===(null===d||void 0===d?void 0:d.total)&&!u}),null===d||void 0===d||null===(e=d.data)||void 0===e?void 0:e.map((function(e){return(0,b.jsx)(N,{user:e,onDelete:y},e.id)}))]})]}),(0,b.jsx)(o.tl,{count:null===d||void 0===d?void 0:d.total_page,page:t.page,onChangePage:function(e){return r("page",e)}})]})})]})]})})),N=function(e){var s,n=e.user,i=e.onDelete,a=void 0===i?function(){return null}:i,l=(0,m.mZ)(),x=l.userModel,j=l.topicModel,v=(0,d.useState)(n.active),N=(0,r.Z)(v,2),y=N[0],k=N[1],w=(0,h.useMutation)({mutationFn:function(e){return x.patchUser(n.id,e)},onSuccess:function(){p.FN.success()},onError:function(){k(n.active),p.FN.error()}}).mutate,_=(0,f.s0)(),C=function(){var e=(0,t.Z)(c().mark((function e(){var s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.postTopic({recipient_id:n.id,group_name:""});case 2:(s=e.sent).id&&_("/apps/messengers/".concat((0,p.jm)(String(s.id))));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{children:(0,b.jsxs)("div",{className:"d-flex align-items-center",children:[(0,b.jsx)("div",{className:"symbol symbol-50px me-5",children:(0,b.jsx)(o.qE,{imageUrl:null===(s=n.media)||void 0===s?void 0:s.original_url,size:50})}),(0,b.jsxs)("div",{className:"d-flex justify-content-start flex-column",children:[(0,b.jsx)("span",{className:"text-dark fw-bold text-hover-primary mb-1 fs-6",children:n.fullname}),(0,b.jsx)("span",{className:"text-muted fw-semobold text-muted d-block fs-7",children:n.telephone})]})]})}),(0,b.jsx)("td",{children:(0,b.jsx)("span",{className:"text-dark d-block mb-1 fs-6",children:n.email})}),(0,b.jsx)("td",{children:(0,b.jsx)("span",{className:"text-dark fw-bold d-block mb-1 fs-6",children:0===n.roles.length?"Kh\xe1ch":"\u0110\u1ed9i ng\u0169"})}),(0,b.jsx)("td",{children:(0,b.jsx)("span",{className:"text-dark fw-bold d-block mb-1 fs-6",children:(0,p.p6)(n.createdAt)})}),(0,b.jsx)("td",{children:(0,b.jsx)("span",{className:"text-dark fw-bold d-block mb-1 fs-6",children:(0,p.p6)(n.updatedAt)})}),(0,b.jsx)("td",{children:(0,b.jsx)(o.yt,{permissions:[".users.:id.patch"],children:(0,b.jsx)(o.rs,{checked:y,onChange:function(e){k(e),w({active:e})}})})}),(0,b.jsxs)("td",{className:"text-end",children:[(0,b.jsx)(o.yt,{permissions:[".users.:id.get",".users.:id.patch"],children:(0,b.jsx)(g.rU,{to:"/apps/users-form/".concat(n.id),className:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1",children:(0,b.jsx)(u.D8,{path:"/media/icons/duotune/art/art005.svg",className:"svg-icon-3"})})}),(0,b.jsx)(o.yt,{permissions:[".users.:id.delete"],children:(0,b.jsx)("button",{onClick:function(){return a(n.id)},className:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1",children:(0,b.jsx)(u.D8,{path:"/media/icons/duotune/general/gen027.svg",className:"svg-icon-3"})})}),(0,b.jsx)("button",{onClick:C,className:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1",children:(0,b.jsx)(u.D8,{path:"/media/icons/duotune/communication/com003.svg",className:"svg-icon-3"})})]})]},n.id)};s.default=v}}]);
//# sourceMappingURL=38.fa6e83a5.chunk.js.map